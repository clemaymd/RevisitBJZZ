#### 2024-02-19 

## Overview

This README file provides information about the data and the computer code used to generate the results presented in Ardia et al. (2025), **Revisiting Boehmer et al. (2021): Recent Period, Alternative method, Different Conclusions.**, Conditionnally accepted for publication in Financial Markets and Portfolio Management.

By using the code, you agree to the following rules:

- You must cite the paper in working papers and published papers that use the code.
- You must place the DOI of this data/code repository in a footnote to help others find it.
- You assume all risk for the use of the code.

All datasets are proprietary. We do not have the rights to share any of the data. We provide pseudo data to illustrate the code usage. 

The computer code is written in SAS and allows for replicating all tables presented in the paper. It also includes our implementation of the Quote MidPoint (QMP) approach, as advocated by Barber et al. (2023).

## Main Folder

The file `ALLTABS.sas` is a wrapper program that allows replicating all tables in the paper.
The files `TAB1.sas` to `TAB8.sas` are second-layer wrapper programs allowing to obtain all or selected parts of Tables 1 to 8, respectively.
Specifically, the replicator can obtain a specific panel by defining the macro-variables `RTMD` and `period`. She can also run results based on specific parameters of the regression (e.g., bid-ask returns (`newret`) or CRSP returns (`ret`), `mroibvol` or `mroibtrd`, specific horizon, etc.)

## Macros Folder

The macro `M_DS4REG.sas` prepares initial input for replicating Tables 2 to 8. It is called in `TAB2.sas` to `TAB8.sas` programs.
The macros `M_TAB2n3.sas` to `M_TAB8.sas` contain the core of the code replicating Tables 2 and 3 to 8, respectively. They are called `TAB2.sas` and `TAB3.sas` to `TAB8.sas` programs, respectively.

## Data Folder

The data files `pseudods_bjzz.sas7bdat` and `pseudods_qmp.sas7bdat` are pseudo-data sets that illustrate the format of the files read by the `TAB1.sas` to `TAB8.sas` programs. 

- Panel data: 100 stocks x 505 trading days, corresponding to one year of pseudo data for each 2010-2015 and 2016-2021 period.

- Variables description (see also Table A of our paper):

  * Retail-trade variables:
	* `mrbvol`: marketable retail buy volume based on shares traded
	* `mrsvol`: marketable retail sell volume based on shares traded
	* `mrbtrd`: marketable retail number of buy trades
	* `mrstrd`: marketable retail number of sell trades
	* `mroibvol`: marketable retail order imbalance based on shares traded
	* `mroibtrd`: marketable retail order imbalance based on number of trades
	
  * Non-retail-trade variables:
	* `newret`: bid-ask return
	* `ret`: CRSP return
	* `lmret`: last-month return
	* `l6mret`: previous six-month return before the last month
	* `lvolnewret`: last-month volatility of daily bid-ask returns
	* `lvolret`: last-month volatility of daily CRSP returns
	* `lto`: last-month-end turnover (reported as 'lmto' in the paper)
	* `size`: last-month-end logarithm of market value
	* `lbm`: last-month-end logarithm of book-to-market ratio
	
  * Others:
	* `DATE`: pseudo-date in YYYYMMDD format
	* `dx`: trading day index
	* `STOCK_ID`: stock identification index
	* `lmp`: pseudo last-month-price (used in share-price subgroups analyses)

The data file `ff.sas7bdat` contains information on Fama-French 3-factor series modified for our purpose. Original data comes from Kenneth R. French's website. This file is read by the `TAB6.sas` program.

## Outputs and Outputs_paper Folders

The folder `Outputs` is populated when files `TAB1.sas` to `TAB8.sas` are run; content is overwritten with each run. **Since these outputs are based on pseudo data sets, they do NOT correspond to the results in the paper**.
The folder `Outputs_paper` contains outputs generated by code files `TAB1.sas` to `TAB8.sas` when we use our original data sets as input, corresponding to results reported in the paper.

## QuoteMidpoint Folder

This folder relates to our implementation of the QMP approach. This folder is self-contained for researchers solely interested in this aspect.

The file `Compute_RTQ_QMP.sas` identifies and signs retail trades with the QMP approach and computes daily-aggregated retail-trade quantities. See the comment section in the file for more details.

The data file `pseudo_taqsymlist.sas7bdat` is an illustrative list of TAQ symbols (SYM_ROOT and SYM_SUFFIX) defining the stock universe.

An output file named `rtq_qmp.sas7bdat` is saved after each run, and any previous content will be overwritten.

## References

Ardia D., Aymard C., and Cenesizoglu T. 2024. Revisiting Boehmer et al. (2021): Recent Period, Alternative method, Different Conclusions. Working paper. https://ssrn.com/abstract=4703056

Barber B. M., Huang X., Jorion P., Odean T., and Schwarz C. 2023. A (Sub)penny For Your Thoughts: Tracking Retail Investor Activity in TAQ. Forthcoming in the Journal of Finance. https://doi.org/10.2139/ssrn.4202874

Boehmer E., Jones C.M., Zhang X., and Zhang X. 2021. Tracking retail investor activity. Journal of Finance 76:2249. https://doi.org/10.1111/jofi.13033 
